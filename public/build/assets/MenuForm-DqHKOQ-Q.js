import{K as k,r as p,c as q,o as s,w as C,b as t,a as E,e as M,g as i,i as d,t as c,k as v,q as x}from"./app-DiE7L2kM.js";import{A as V}from"./AuthenticatedLayout-BnSuEXTT.js";import A from"./Contact-BJVm6Zk7.js";/* empty css                                                                            */import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                */const B={class:"relative min-h-screen"},S={class:"relative z-10 py-10 px-4 sm:px-6 lg:px-8"},T={class:"max-w-2xl mx-auto"},D={class:"bg-white/30 backdrop-blur-md border border-white/20 rounded-2xl shadow-lg p-6 text-white"},I={key:0,class:"bg-green-100 text-green-800 px-4 py-2 rounded mb-4 border border-green-300 transition"},N={key:1,class:"bg-red-100 text-red-700 px-4 py-2 rounded mb-4"},O={key:2,class:"bg-yellow-100 text-yellow-700 px-4 py-2 rounded mb-4"},j={key:0,class:"text-red-600 text-sm mt-1"},U={key:0,class:"text-red-600 text-sm mt-1"},z={key:0,class:"text-red-600 text-sm mt-1"},K={key:0,class:"text-red-600 text-sm mt-1"},R=["disabled"],L={key:0},X={key:1},Z={__name:"MenuForm",props:{auth:Object},setup(h){const a=k({name:"",price:null,description:""});let m=null;const o=k({}),l=p(""),b=p(""),f=p(""),u=p(!1),w=p(null),g=p(null);function _(n){if(m=n.target.files[0],m&&m.size>2*1024*1024){f.value="File is too large. Please select an image under 2MB.",m=null,g.value&&(g.value.value="");return}f.value=""}function F(){const n=document.querySelector('meta[name="csrf-token"]');return n?n.getAttribute("content"):null}async function P(){if(l.value="",b.value="",f.value="",Object.keys(o).forEach(r=>delete o[r]),u.value=!0,!m){o.picture=["Picture is required"],u.value=!1;return}const n=new FormData;n.append("name",a.name),n.append("price",a.price),n.append("description",a.description),n.append("picture",m);const e=F();if(!e){l.value="CSRF token not found. Please refresh the page.",u.value=!1;return}try{const r=await fetch("/menus",{method:"POST",headers:{"X-CSRF-TOKEN":e},body:n});if(r.status===422){const y=await r.json();y.errors?(Object.assign(o,y.errors),l.value="Please fix the errors below."):l.value="Validation failed.",u.value=!1;return}if(!r.ok){l.value="Failed to add menu item. Please try again.",u.value=!1;return}window.location.href="/restaurantmenus"}catch(r){console.error("Error adding menu item:",r),l.value="Failed to add menu item. Please try again."}finally{u.value=!1}}return(n,e)=>(s(),q(V,{auth:h.auth},{default:C(()=>[t("div",B,[e[8]||(e[8]=t("div",{class:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{"background-image":"url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80')"}},[t("div",{class:"absolute inset-0 bg-gradient-to-br from-black/60 via-black/40 to-orange-900/30"})],-1)),t("div",S,[t("div",T,[t("div",D,[e[7]||(e[7]=t("h2",{class:"text-3xl font-bold text-orange-700 mb-6 text-center"},"Add Menu Item",-1)),t("form",{onSubmit:M(P,["prevent"]),class:"space-y-6",enctype:"multipart/form-data",ref_key:"menuForm",ref:w},[b.value?(s(),i("div",I,c(b.value),1)):d("",!0),l.value?(s(),i("div",N,c(l.value),1)):d("",!0),f.value?(s(),i("div",O,c(f.value),1)):d("",!0),t("div",null,[e[3]||(e[3]=t("label",{for:"name",class:"block text-sm font-semibold text-orange-900 mb-1"},"Name",-1)),v(t("input",{id:"name",type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>a.name=r),required:"",class:"w-full px-4 py-2 border border-orange-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 text-black"},null,512),[[x,a.name]]),o.name?(s(),i("div",j,c(o.name[0]),1)):d("",!0)]),t("div",null,[e[4]||(e[4]=t("label",{for:"price",class:"block text-sm font-semibold text-orange-900 mb-1"},"Price (ETB)",-1)),v(t("input",{id:"price",type:"number","onUpdate:modelValue":e[1]||(e[1]=r=>a.price=r),required:"",class:"w-full px-4 py-2 border border-orange-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 text-black"},null,512),[[x,a.price]]),o.price?(s(),i("div",U,c(o.price[0]),1)):d("",!0)]),t("div",null,[e[5]||(e[5]=t("label",{for:"picture",class:"block text-sm font-semibold text-orange-900 mb-1"},"Picture",-1)),t("input",{id:"picture",type:"file",onChange:_,accept:"image/*",required:"",class:"w-full px-4 py-2 border border-orange-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",ref_key:"pictureInput",ref:g},null,544),o.picture?(s(),i("div",z,c(o.picture[0]),1)):d("",!0)]),t("div",null,[e[6]||(e[6]=t("label",{for:"description",class:"block text-sm font-semibold text-orange-900 mb-1"},"Description",-1)),v(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=r=>a.description=r),rows:"4",class:"w-full px-4 py-2 border border-orange-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 text-black"},null,512),[[x,a.description]]),o.description?(s(),i("div",K,c(o.description[0]),1)):d("",!0)]),t("button",{type:"submit",disabled:u.value,class:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 rounded-md transition"},[u.value?(s(),i("span",L,"Adding...")):(s(),i("span",X,"Add Menu Item"))],8,R)],544)])])])]),E(A)]),_:1},8,["auth"]))}};export{Z as default};
