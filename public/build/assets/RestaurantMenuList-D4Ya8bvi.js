import{r as l,m as A,A as B,j as d,s as H,g as r,o as a,b as t,t as u,k as c,q as E,z as y,F as k,x as _,i as I,a as D,f as $}from"./app-DiE7L2kM.js";/* empty css                                                                            */import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import q from"./RestaurantCard-BpXy_Hqv.js";const P={class:"min-h-screen bg-gradient-to-b from-orange-50/40 via-white to-white"},z={class:"max-w-7xl mx-auto px-6 py-12"},O={key:0,class:"flex justify-center items-center h-64"},Q={key:1,class:"text-center py-12"},J={class:"text-red-500 text-xl mb-4"},G={key:2},K={class:"mb-8 max-w-4xl flex flex-col sm:flex-row sm:items-center sm:space-x-6 space-y-4 sm:space-y-0"},W=["value"],X={key:0,class:"text-center py-8 text-gray-500"},Y={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 mb-16"},ee=["onClick"],te={class:"mb-6 rounded-2xl border border-orange-100 bg-white/90 p-4 sm:p-5 shadow-sm"},oe={class:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between"},se={class:"w-full sm:max-w-md"},re={class:"relative"},ae={class:"w-full sm:w-60"},ne={class:"relative"},le={key:2,class:"text-center py-8 text-gray-500"},ie={key:3,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"},de={class:"relative overflow-hidden"},ue=["src","alt"],ce={class:"p-4 sm:p-5"},me={class:"text-lg font-semibold text-gray-900"},ge={class:"mt-1 text-sm text-gray-600 clamp-2"},pe={class:"mt-4 flex items-center justify-between"},ve={class:"text-base sm:text-lg font-semibold text-orange-600"},fe={class:"flex gap-2"},xe=["onClick"],be=["onClick"],we={__name:"RestaurantMenuList",props:{auth:Object},setup(he){const g=l([]),C=l([]),M=l(!0),p=l(null),v=l(""),m=l("All"),f=l(0),i=l(""),x=l("name_asc");A(async()=>{try{const[s,e]=await Promise.all([B.get("/api/restaurants"),B.get("/api/menus")]);g.value=s.data.restaurants,C.value=e.data.menus}catch(s){p.value="Failed to load data",console.error("Error loading data:",s)}finally{M.value=!1}}),l(!1);const L=l(null),Z=l(1);l(""),d(()=>L.value?(Number(L.value.price)||0)*Z.value:0);const j=d(()=>{const s=(g.value||[]).map(e=>e.category).filter(Boolean);return["All",...Array.from(new Set(s))]}),N=d(()=>(g.value||[]).filter(e=>{const n=(e.name||"").toLowerCase().includes(v.value.toLowerCase()),h=m.value==="All"||e.category===m.value,U=parseFloat(e.rating||0)>=f.value;return n&&h&&U})),R=d(()=>{const s=i.value.trim().toLowerCase().replace(/\s+/g," ");let e=(C.value||[]).filter(o=>{const n=(o?.name??"").toLowerCase(),h=(o?.description??"").toLowerCase();return s===""||n.includes(s)||h.includes(s)});switch(x.value){case"price_asc":e.sort((o,n)=>(Number(o.price)||0)-(Number(n.price)||0));break;case"price_desc":e.sort((o,n)=>(Number(n.price)||0)-(Number(o.price)||0));break;case"name_desc":e.sort((o,n)=>(n.name||"").localeCompare(o.name||"",void 0,{sensitivity:"base"}));break;case"name_asc":default:e.sort((o,n)=>(o.name||"").localeCompare(n.name||"",void 0,{sensitivity:"base"}));break}return e});function F(s){s?.slug?window.location.href=`/restaurants/${encodeURIComponent(s.slug)}`:s?.id&&(window.location.href=`/restaurants/${s.id}`)}const b=l([]),w=()=>{try{b.value=JSON.parse(localStorage.getItem("cart")||"[]")}catch{b.value=[]}};d(()=>b.value.reduce((s,e)=>s+Number(e.quantity||0),0));const S=s=>{(!s||s.key==="cart")&&w()},V=()=>w();return A(()=>{w(),window.addEventListener("storage",S),window.addEventListener("cart:updated",V)}),H(()=>{window.removeEventListener("storage",S),window.removeEventListener("cart:updated",V)}),(s,e)=>(a(),r("div",P,[t("div",z,[M.value?(a(),r("div",O,e[7]||(e[7]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"},null,-1),t("span",{class:"ml-3 text-gray-600"},"Loading restaurants and menus...",-1)]))):p.value?(a(),r("div",Q,[t("div",J,"⚠️ "+u(p.value),1),t("button",{onClick:e[0]||(e[0]=o=>s.window.location.reload()),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition"}," Try Again ")])):(a(),r("div",G,[e[20]||(e[20]=t("h2",{class:"text-3xl font-extrabold text-gray-900 mb-6"},"Featured Restaurants",-1)),t("div",K,[c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>v.value=o),type:"text",placeholder:"Search restaurants...",class:"flex-grow px-4 py-3 rounded-xl border border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"},null,512),[[E,v.value]]),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),class:"px-4 py-3 rounded-xl border border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"},[(a(!0),r(k,null,_(j.value,o=>(a(),r("option",{key:o,value:o},u(o),9,W))),128))],512),[[y,m.value]]),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),class:"px-4 py-3 rounded-xl border border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-500 transition"},e[8]||(e[8]=[t("option",{value:0},"All Ratings",-1),t("option",{value:4},"4 stars & up",-1),t("option",{value:4.5},"4.5 stars & up",-1),t("option",{value:5},"5 stars",-1)]),512),[[y,f.value,void 0,{number:!0}]])]),N.value.length===0?(a(),r("div",X," No restaurants found matching your criteria. ")):(a(),r("div",Y,[(a(!0),r(k,null,_(N.value,o=>(a(),r("div",{key:o.id,class:"cursor-pointer",onClick:n=>F(o)},[D(q,{restaurant:o},null,8,["restaurant"])],8,ee))),128))])),e[21]||(e[21]=t("h2",{class:"text-3xl font-extrabold text-gray-900 mb-6"},"Featured Menus",-1)),t("div",te,[t("div",oe,[t("div",se,[e[11]||(e[11]=t("label",{for:"menu-search",class:"sr-only"},"Search dishes",-1)),t("div",re,[e[10]||(e[10]=t("span",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400"},[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("path",{d:"m21 21-4.3-4.3"})])],-1)),c(t("input",{id:"menu-search","onUpdate:modelValue":e[4]||(e[4]=o=>i.value=o),type:"search",placeholder:"Search dishes...",class:"w-full rounded-xl border border-orange-200/70 bg-white pl-10 pr-10 py-2.5 text-sm shadow-sm placeholder:text-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-200"},null,512),[[E,i.value]]),i.value?(a(),r("button",{key:0,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600","aria-label":"Clear search",onClick:e[5]||(e[5]=o=>i.value="")},e[9]||(e[9]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[t("path",{d:"M18 6 6 18M6 6l12 12"})],-1)]))):I("",!0)])]),t("div",ae,[e[14]||(e[14]=t("label",{for:"menu-sort",class:"sr-only"},"Sort menu",-1)),t("div",ne,[c(t("select",{id:"menu-sort","onUpdate:modelValue":e[6]||(e[6]=o=>x.value=o),class:"block w-full appearance-none rounded-xl border border-orange-200/70 bg-white px-3 py-2.5 text-sm shadow-sm focus:border-orange-500 focus:ring-2 focus:ring-orange-200"},e[12]||(e[12]=[t("option",{value:"name_asc"},"Name: A → Z",-1),t("option",{value:"name_desc"},"Name: Z → A",-1),t("option",{value:"price_asc"},"Price: Low → High",-1),t("option",{value:"price_desc"},"Price: High → Low",-1)]),512),[[y,x.value]]),e[13]||(e[13]=t("span",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"h-5 w-5","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.24a.75.75 0 0 1-1.06 0L5.25 8.27a.75.75 0 0 1-.02-1.06Z","clip-rule":"evenodd"})])],-1))])])])]),R.value.length===0?(a(),r("div",le," No menu items found matching your criteria. ")):(a(),r("div",ie,[(a(!0),r(k,null,_(R.value,o=>(a(),r("article",{key:o.id,role:"listitem",class:"group relative overflow-hidden rounded-2xl border border-orange-100 bg-white shadow-sm transition-all hover:-translate-y-0.5 hover:shadow-lg focus-within:ring-2 focus-within:ring-orange-300"},[e[19]||(e[19]=t("div",{class:"pointer-events-none absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-orange-500 via-amber-400 to-orange-500 opacity-70"},null,-1)),t("div",de,[e[15]||(e[15]=t("div",{class:"aspect-[4/3] w-full bg-gray-100"},null,-1)),t("img",{src:o?.picture?`/storage/${o.picture}`:"https://via.placeholder.com/800x600.png?text=No+Image",alt:o?.name?`${o.name} image`:"Menu image",loading:"lazy",class:"absolute inset-0 h-full w-full object-cover transition duration-300 group-hover:scale-[1.03]"},null,8,ue),e[16]||(e[16]=t("div",{class:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/15 via-transparent to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"},null,-1))]),t("div",ce,[t("h3",me,u(o.name),1),t("p",ge,u(o.description),1),t("div",pe,[t("span",ve,u(new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",minimumFractionDigits:2}).format(Number(o.price)||0)),1),t("div",fe,[t("button",{type:"button",onClick:n=>s.editMenu(o),class:"inline-flex items-center gap-1.5 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 px-3 py-1.5 text-xs font-medium text-white shadow hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300","aria-label":"Edit menu"},e[17]||(e[17]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},[t("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),t("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"})],-1),$(" Edit ",-1)]),8,xe),t("button",{type:"button",onClick:n=>s.deleteMenu(o),class:"inline-flex items-center gap-1.5 rounded-lg bg-gradient-to-r from-red-500 to-red-600 px-3 py-1.5 text-xs font-medium text-white shadow hover:from-red-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-red-300","aria-label":"Delete menu"},e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4"},[t("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.224-1.452Z"}),t("path",{d:"M5.25 7.5A.75.75 0 0 1 6 6.75h12a.75.75 0 0 1 .75.75v8.25a.75.75 0 0 1-.75.75H6a.75.75 0 0 1-.75-.75V7.5Z"})],-1),$(" Delete ",-1)]),8,be)])])])]))),128))]))]))])]))}},Le=T(we,[["__scopeId","data-v-b182a4c8"]]);export{Le as default};
